[
  {
    "title": "NIHSS",
    "content": "[NIHSS]\n1a æ„è­˜éšœç¤™ç¨‹åº¦(0-3): 0\n1b æ„è­˜éšœç¤™ç¨‹åº¦:å›ç­”å•é¡Œ(0-2): 0\n1c æ„è­˜éšœç¤™ç¨‹åº¦:ç…§å‘½ä»¤åšå‹•ä½œ(0-2): 0\n2 çœ¼çƒé‹å‹•(0-2): 0\n3 è¦–åŠ›(0-3): 0\n4 é¡é¢éº»ç—º(0-3): 0\n5aL å·¦ä¸Šè‚¢é‹å‹•(0-4): 0\n5bR å³ä¸Šè‚¢é‹å‹•(0-4): 0\n6aL å·¦ä¸‹è‚¢é‹å‹•(0-4): 0\n6bR å³ä¸‹è‚¢é‹å‹•(0-4): 0\n7 è‚¢é«”å‹•ä½œä¸å”èª¿(0-2): 0\n8 æ„Ÿè¦ºéšœç¤™(0-2): 0\n9 è¨€èªéšœç¤™(0-3): 0\n10 æ§‹éŸ³éšœç¤™(0-2): 0\n11 æ„Ÿè¦ºå¿½è¦–(0-2): 0\nç¸½åˆ†: 0"
  },
  {
    "title": "Stroke [Assessment]",
    "content": "- Brain MRI: pending\n- LDL: pending\n- HbA1c: pending\n- Cardiac echo: pending\n- Holter: pending\n- ECD/TCD: pending"
  },
  {
    "title": "Stroke admission [Diagnostic plan]",
    "content": "[Brain imaging]\n- Brain MRI without contrast for better visualization of infarct territory and size\n\n[Risk factor investigation]\n- Make sure CBC, basic chemistry, EKG, CXR been done\n- Check lipid and sugar profile and HbA1c\n- Arrange extracranial carotid and transcranial color duplex,\n- Arrange echocardiography, Holter monitor (24h) \n\n- Young stroke survey: hypercoagulopathy, vasculitis, genetic causes"
  },
  {
    "title": "Stroke admission [Educational plan]",
    "content": "Explain the plan after admission.\nInform the patient about the high risk of recurrent stroke during the acute phase and warn them about the red flag signs.\nExplore available community support services and transportation options."
  },
  {
    "title": "Stroke admission [Therapeutic plan]",
    "content": "[Antithrombotic therapy]\n- Aspirin  Clopidogrel  for secondary stroke prevention\n\n[Monitor of neurological and other clinical status]\n- Evaluate GCS coma scale, muscle strength, pupil size QID and PRN\n- Check finger sugar regularly, and keep it under 200 mg/dL\n- Check vital signs. Not to decrease BP unless BP high than 180/110 mmHg. \n- Complete bedside swallow examination. Repeat it if necessary\n- Follow up brain imaging if NIHSS drop (or more than 4)\n\n[Others]\n- Use short-acting antihypertensive agent if we need to lower the BP \n- Consider isotonic fluid for volume expansion if necessary with close monitoring of fluid status \n- Consult rehabilitation within 72 hours"
  },
  {
    "title": "Stroke progress note [Plan]",
    "content": "# Acute infarction at left corona radiata\n- Pending for stroke survey\n- Dual antiplatelet therapy\n- Hydration normal saline 1000mL/day\n- Keep rehabilitation\n- BP control < 220mmHg"
  },
  {
    "title": "[Discharge] Stable vital sign and clinical condition",
    "content": "Stable vital sign and clinical condition"
  },
  {
    "title": "[Discharge] Under stable vital sign ... OPD follow up",
    "content": "Under stable vital sign and clinical condtition, he was discharged with OPD follow up arranged."
  },
  {
    "title": "é€šç”¨ education plan",
    "content": "Explain the diagnostic and therapeutic plan after admission."
  },
  {
    "title": "05828867",
    "content": "A 45 y/o male has past history of\nPlantar fasciitis (monitored at rehabilitation department)\nHe experienced sudden onset of left-sided weakness and numbness starting around 1/09 16:00 when getting out of bed. The symptoms were accompanied by exacerbated pain in the left sole. He denied dizziness, headache, nausea, vomiting, dysarthria, dysphagia, diplopia, blurred vision, hearing impairment, or tinnitus.\nLKNT: 1/09 16:00\nPatient baseline status: GCS E4V5M6, pre-Stroke mRS: 0\nConsciousness: E4V5M6, alert\nLanguage: no aphasia\nEOM: full, pupil (R/L: 3mm+/3mm+)\nFacial palsy: (-)\nDysarthria: (-)\nDysphagia: (-)\nMotor:\n * upper proximal (R/L: [5/5]), upper distal (R/L: [5/4]) (including decreased grip strength and wrist flexion/extension on the left)\n * lower proximal (R/L: [5/5]), lower distal (R/L: [5/5])\n   DTR: L4(R/L): ++/++\n   Babinski sign: R/L: mute/down\n   Sensory: Left-sided hypoesthesia (L/R: 5~6/10) over the left forearm, palm, neck, and back; sensory was symmetric in the lower limbs.\n   FNF: no dysmetria\n   Gait: normal, Romberg test: negative.\nER NIHSS: 1 (Sensory) = 1\nImaging Findings:\nBrain CT scan: Pending/No acute intracranial hemorrhage.\nImpression:\nMinor stroke, r/o acute right subcortical infarction\nSuggestion:\nAcute Stroke Management:\n * Aspirin 3# STAT + 1# QD\n * Clopidogrel 4# STAT + 1# QD\n * IV hydration N/S\nWe have explained the clinical course to the family and the patient, please keep f/u clinical symptoms and signs.\nSuggest admission for stroke survey and observation. If the patient requests AAD, please arrange Neurological OPD follow-up.\nResident S-H Wang (#2545)"
  },
  {
    "title": "BGM",
    "content": "<!DOCTYPE html>\n<html lang=\"zh-TW\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>æ—ºå¹´æœƒç¾å ´éŸ³æ¨‚ä¸­æ§å° V5.1</title>\n    <script src=\"https://cdn.tailwindcss.com\"></script>\n    <style>\n        .active-glow {\n            box-shadow: 0 0 15px rgba(59, 130, 246, 0.8);\n            border-color: #3b82f6 !important;\n            background-color: #1e40af !important;\n        }\n        .loop-active {\n            color: #10b981 !important;\n            text-shadow: 0 0 8px #10b981;\n        }\n        .paused-state {\n            opacity: 0.6;\n            filter: grayscale(0.5);\n        }\n        .zone-card {\n            transition: all 0.2s ease;\n            display: flex;\n            flex-direction: column;\n            height: 550px;\n        }\n        .song-list {\n            flex-grow: 1;\n            overflow-y: auto;\n        }\n        input[type=\"range\"] {\n            cursor: pointer;\n        }\n        /* è‡ªå®šç¾©æ²è»¸ */\n        ::-webkit-scrollbar { width: 6px; }\n        ::-webkit-scrollbar-track { background: #1f2937; }\n        ::-webkit-scrollbar-thumb { background: #4b5563; border-radius: 10px; }\n        \n        .youtube-btn {\n            border-left: 4px solid #ff0000 !important;\n        }\n\n        /* Modal æ¨£å¼ */\n        #ytModal {\n            display: none;\n            position: fixed;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n            background: rgba(0,0,0,0.8);\n            z-index: 1000;\n            align-items: center;\n            justify-content: center;\n        }\n    </style>\n</head>\n<body class=\"bg-gray-900 text-gray-100 min-h-screen p-4 font-sans pb-20\">\n\n    <!-- YouTube è¼¸å…¥æ¨¡æ…‹è¦–çª— -->\n    <div id=\"ytModal\">\n        <div class=\"bg-gray-800 p-6 rounded-xl border border-gray-700 w-full max-w-md shadow-2xl\">\n            <h3 class=\"text-xl font-bold text-red-400 mb-4\">æ–°å¢ YouTube é€£çµ</h3>\n            <div class=\"space-y-4\">\n                <div>\n                    <label class=\"block text-xs text-gray-400 mb-1\">éŸ³æ¨‚åç¨±</label>\n                    <input type=\"text\" id=\"ytNameInput\" class=\"w-full bg-gray-900 border border-gray-700 rounded p-2 text-white focus:border-red-500 outline-none\" placeholder=\"ä¾‹å¦‚ï¼šé–‹å ´èˆæ›²\">\n                </div>\n                <div>\n                    <label class=\"block text-xs text-gray-400 mb-1\">YouTube ç¶²å€</label>\n                    <input type=\"text\" id=\"ytUrlInput\" class=\"w-full bg-gray-900 border border-gray-700 rounded p-2 text-white focus:border-red-500 outline-none\" placeholder=\"https://www.youtube.com/watch?v=...\">\n                </div>\n            </div>\n            <div class=\"flex gap-3 mt-6\">\n                <button onclick=\"closeYoutubeModal()\" class=\"flex-1 bg-gray-700 hover:bg-gray-600 py-2 rounded font-medium transition\">å–æ¶ˆ</button>\n                <button onclick=\"confirmYoutubeLink()\" class=\"flex-1 bg-red-600 hover:bg-red-500 py-2 rounded font-bold transition\">ç¢ºèªæ–°å¢</button>\n            </div>\n        </div>\n    </div>\n\n    <!-- Header -->\n    <header class=\"bg-gray-800 p-4 rounded-xl shadow-lg border border-gray-700 mb-4\">\n        <div class=\"flex justify-between items-center mb-4\">\n            <div>\n                <h1 class=\"text-2xl font-bold text-blue-400\">æ—ºå¹´æœƒéŸ³æ¨‚ä¸­æ§å° V5.1</h1>\n                <p class=\"text-xs text-yellow-500\">å·²ä¿®å¾© YouTube å½ˆçª—å•é¡Œ | æ”¯æ´ JSON å­˜å–</p>\n            </div>\n            <div class=\"flex gap-2\">\n                <button onclick=\"exportConfig()\" class=\"bg-indigo-600 hover:bg-indigo-700 px-3 py-2 rounded text-sm font-medium transition\">ğŸ“¤ åŒ¯å‡ºè¨­å®š</button>\n                <input type=\"file\" id=\"import-json\" class=\"hidden\" accept=\".json\" onchange=\"importConfig(this)\">\n                <label for=\"import-json\" class=\"bg-indigo-600 hover:bg-indigo-700 px-3 py-2 rounded text-sm font-medium cursor-pointer transition\">ğŸ“¥ åŒ¯å…¥è¨­å®š</label>\n                <button onclick=\"togglePauseAll()\" class=\"bg-yellow-600 hover:bg-yellow-700 px-4 py-2 rounded font-bold transition flex items-center gap-2\">\n                    <span id=\"global-pause-icon\">â¸</span> æš«åœ/ç¹¼çºŒ\n                </button>\n                <button onclick=\"stopAll()\" class=\"bg-red-600 hover:bg-red-700 px-4 py-2 rounded font-bold transition\">ğŸ›‘ åœæ­¢ (ESC)</button>\n            </div>\n        </div>\n        <div class=\"flex items-center gap-4 bg-gray-900/50 p-2 rounded-lg\">\n            <span class=\"text-xs text-gray-400\">ç¸½éŸ³é‡</span>\n            <input type=\"range\" id=\"masterVolume\" min=\"0\" max=\"1\" step=\"0.05\" value=\"0.8\" class=\"flex-grow h-2 bg-gray-700 rounded-lg appearance-none\">\n        </div>\n    </header>\n\n    <!-- Main Grid -->\n    <div class=\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4\">\n        \n        <script>\n            const zones = [\n                { id: 'bgm', title: 'ğŸ® ä¼‘æ¯/èƒŒæ™¯éŸ³', color: 'green' },\n                { id: 'show', title: 'ğŸ’ƒ è¡¨æ¼”/é€²å ´', color: 'yellow' },\n                { id: 'buffer', title: 'âš¡ å½ˆæ€§ç·©è¡å€', color: 'purple' }\n            ];\n            \n            zones.forEach(z => {\n                document.write(`\n                <div class=\"zone-card bg-gray-800 p-4 rounded-xl border border-gray-700\">\n                    <div class=\"flex justify-between items-center mb-2\">\n                        <h2 class=\"text-lg font-semibold text-${z.color}-400\">${z.title}</h2>\n                        <div class=\"flex gap-1\">\n                            <button onclick=\"openYoutubeModal('${z.id}')\" class=\"text-[10px] bg-red-900/50 hover:bg-red-800 px-2 py-1 rounded text-red-200\">YT</button>\n                            <input type=\"file\" id=\"files-${z.id}\" multiple accept=\"audio/*\" class=\"hidden\" onchange=\"handleFileSelect(this, '${z.id}')\">\n                            <label for=\"files-${z.id}\" class=\"text-[10px] bg-gray-700 hover:bg-gray-600 cursor-pointer px-2 py-1 rounded\">æª”æ¡ˆ</label>\n                        </div>\n                    </div>\n                    <div id=\"progress-${z.id}\" class=\"mb-4 p-2 bg-black/30 rounded border border-${z.color}-900/30 hidden\">\n                        <div class=\"flex justify-between text-[10px] mb-1 text-${z.color}-400\">\n                            <span id=\"time-${z.id}\">00:00 / 00:00</span>\n                            <span id=\"title-${z.id}\" class=\"truncate ml-2 max-w-[100px]\">---</span>\n                        </div>\n                        <div class=\"flex items-center gap-2\">\n                            <input type=\"range\" id=\"seek-${z.id}\" value=\"0\" min=\"0\" max=\"100\" class=\"flex-grow h-1\" oninput=\"seekAudio('${z.id}', this.value)\">\n                            <button onclick=\"togglePauseZone('${z.id}')\" class=\"text-xs bg-gray-700 px-2 py-0.5 rounded hover:bg-gray-600\" id=\"pause-btn-${z.id}\">â¸</button>\n                        </div>\n                    </div>\n                    <div id=\"list-${z.id}\" class=\"song-list space-y-2 pr-1\">\n                        <p class=\"text-gray-500 text-sm italic text-center py-10\">å°šç„¡å…§å®¹</p>\n                    </div>\n                </div>\n                `);\n            });\n        </script>\n\n        <!-- Zone 4: æŠ½çå¿«åˆ‡å°ˆå€ -->\n        <div class=\"zone-card bg-blue-900/20 p-4 rounded-xl border border-blue-700/50\">\n            <h2 class=\"text-lg font-semibold text-blue-300 mb-4\">ğŸ æŠ½çå¿«åˆ‡å°ˆå€</h2>\n            \n            <div id=\"progress-draw\" class=\"mb-4 p-2 bg-black/40 rounded border border-blue-900/50 hidden\">\n                <div class=\"flex justify-between text-[10px] mb-1 text-blue-300\">\n                    <span id=\"time-draw\">00:00 / 00:00</span>\n                    <span id=\"title-draw\" class=\"truncate ml-2 italic text-[10px]\">æ’­æ”¾ä¸­</span>\n                </div>\n                <div class=\"flex items-center gap-2\">\n                    <input type=\"range\" id=\"seek-draw\" value=\"0\" min=\"0\" max=\"100\" class=\"flex-grow h-1\" oninput=\"seekAudio('draw', this.value)\">\n                    <button onclick=\"togglePauseZone('draw')\" class=\"text-xs bg-gray-700 px-2 py-0.5 rounded hover:bg-gray-600\" id=\"pause-btn-draw\">â¸</button>\n                </div>\n            </div>\n\n            <div class=\"space-y-4\">\n                <div class=\"bg-gray-800 p-3 rounded-lg border border-gray-700\">\n                    <div class=\"flex justify-between items-center mb-1\">\n                        <span class=\"text-[10px] text-gray-400 font-bold\">1. æŠ½çé¼“è²</span>\n                        <button onclick=\"openYoutubeModal('draw-loop')\" class=\"text-[9px] bg-red-900/30 px-1 rounded\">YT</button>\n                    </div>\n                    <input type=\"file\" id=\"file-draw-loop\" accept=\"audio/*\" class=\"hidden\" onchange=\"handleFileSelect(this, 'draw-loop')\">\n                    <div id=\"btn-draw-loop-container\" class=\"flex gap-1 items-center\">\n                        <label for=\"file-draw-loop\" class=\"flex-grow text-center border border-dashed border-gray-600 py-2 rounded cursor-pointer hover:bg-gray-700 text-xs\">è¼‰å…¥éŸ³æª”</label>\n                    </div>\n                </div>\n\n                <div class=\"bg-gray-800 p-3 rounded-lg border border-gray-700\">\n                    <div class=\"flex justify-between items-center mb-1\">\n                        <span class=\"text-[10px] text-gray-400 font-bold\">2. æ­å–œä¸­ç</span>\n                        <button onclick=\"openYoutubeModal('draw-win')\" class=\"text-[9px] bg-red-900/30 px-1 rounded\">YT</button>\n                    </div>\n                    <input type=\"file\" id=\"file-draw-win\" accept=\"audio/*\" class=\"hidden\" onchange=\"handleFileSelect(this, 'draw-win')\">\n                    <div id=\"btn-draw-win-container\" class=\"flex gap-1 items-center\">\n                        <label for=\"file-draw-win\" class=\"flex-grow text-center border border-dashed border-gray-600 py-2 rounded cursor-pointer hover:bg-gray-700 text-xs\">è¼‰å…¥éŸ³æª”</label>\n                    </div>\n                </div>\n            </div>\n            \n            <div class=\"mt-auto p-2 bg-blue-950/50 rounded text-[9px] text-blue-300/80 italic leading-tight\">\n                * æœ¬å€å…·å‚™æœ€é«˜å„ªå…ˆæ¬Šï¼Œé»æ“Šå°‡åœæ‰å…¶ä»–å€åŸŸã€‚\n            </div>\n        </div>\n    </div>\n\n    <footer class=\"fixed bottom-0 left-0 right-0 bg-black/90 backdrop-blur-md p-2 border-t border-gray-800 flex justify-between px-6 items-center\">\n        <div class=\"text-xs text-gray-400\">\n            ç‹€æ…‹ï¼š<span id=\"status-text\" class=\"text-blue-400\">æº–å‚™å°±ç·’</span>\n        </div>\n        <div class=\"text-[10px] text-gray-500 font-mono italic\">V5.1 STABLE | SPACE: PAUSE | ESC: STOP</div>\n    </footer>\n\n    <script>\n        let playlists = { bgm: [], show: [], buffer: [], 'draw-loop': [], 'draw-win': [] };\n        const audioContexts = {};\n        const progressIntervals = {};\n        const activeButtons = {};\n        let currentModalZone = null;\n\n        window.addEventListener('keydown', (e) => { \n            if (e.key === 'Escape') stopAll();\n            if (e.key === ' ' && e.target.tagName !== 'INPUT') { e.preventDefault(); togglePauseAll(); }\n        });\n\n        // Modal æ§åˆ¶\n        function openYoutubeModal(zone) {\n            currentModalZone = zone;\n            document.getElementById('ytModal').style.display = 'flex';\n            document.getElementById('ytNameInput').focus();\n        }\n\n        function closeYoutubeModal() {\n            document.getElementById('ytModal').style.display = 'none';\n            document.getElementById('ytNameInput').value = '';\n            document.getElementById('ytUrlInput').value = '';\n        }\n\n        function confirmYoutubeLink() {\n            const name = document.getElementById('ytNameInput').value;\n            const url = document.getElementById('ytUrlInput').value;\n            if (!name || !url) {\n                alert(\"è«‹è¼¸å…¥å®Œæ•´çš„åç¨±èˆ‡ç¶²å€\");\n                return;\n            }\n            const song = {\n                id: 'yt-' + Math.random().toString(36).substr(2, 9),\n                name: name,\n                type: 'youtube',\n                url: url\n            };\n            if (currentModalZone.startsWith('draw-')) playlists[currentModalZone] = [song];\n            else playlists[currentModalZone].push(song);\n            \n            renderList(currentModalZone);\n            closeYoutubeModal();\n            updateStatus(\"å·²æ–°å¢ YouTube é€£çµ\");\n        }\n\n        function handleFileSelect(input, zone) {\n            Array.from(input.files).forEach(file => {\n                const song = {\n                    id: 'file-' + Math.random().toString(36).substr(2, 9),\n                    name: file.name.replace(/\\.[^/.]+$/, \"\"),\n                    type: 'local',\n                    url: URL.createObjectURL(file),\n                    loop: false\n                };\n                if (zone.startsWith('draw-')) playlists[zone] = [song];\n                else playlists[zone].push(song);\n            });\n            renderList(zone);\n        }\n\n        function renderList(zone) {\n            if (zone.startsWith('draw-')) {\n                const container = document.getElementById(`btn-${zone}-container`);\n                const song = playlists[zone][0];\n                if (!song) return;\n                \n                const wrapper = document.createElement('div');\n                wrapper.className = \"flex gap-1 w-full\";\n\n                const btn = document.createElement('button');\n                btn.className = `flex-grow p-3 rounded-lg font-bold shadow transition text-sm ${song.type === 'youtube' ? 'bg-red-800/80 hover:bg-red-700 youtube-btn' : 'bg-blue-600 hover:bg-blue-500'}`;\n                btn.innerText = (song.type === 'youtube' ? 'ğŸ“º ' : 'ğŸ¥ ') + song.name;\n                btn.onclick = () => song.type === 'youtube' ? window.open(song.url, '_blank') : playMusic('draw', song.url, btn, song.name, song.id, zone === 'draw-loop');\n                \n                const delBtn = document.createElement('button');\n                delBtn.className = \"bg-gray-700 hover:bg-red-900 px-2 rounded text-xs\";\n                delBtn.innerText = \"âœ•\";\n                delBtn.onclick = () => { playlists[zone] = []; renderList(zone); };\n\n                wrapper.appendChild(btn);\n                wrapper.appendChild(delBtn);\n                container.innerHTML = '';\n                container.appendChild(wrapper);\n                return;\n            }\n\n            const list = document.getElementById(`list-${zone}`);\n            list.innerHTML = '';\n            playlists[zone].forEach((song, index) => {\n                const wrapper = document.createElement('div');\n                wrapper.className = \"flex items-center gap-1 group\";\n                \n                const btn = document.createElement('button');\n                btn.className = `song-btn flex-grow p-3 bg-gray-700 hover:bg-gray-600 rounded-l-lg text-left transition flex justify-between items-center overflow-hidden ${song.type === 'youtube' ? 'youtube-btn' : ''}`;\n                btn.innerHTML = `<span class=\"truncate text-xs font-medium\">${(song.type === 'youtube' ? 'ğŸ“º ' : '') + song.name}</span>`;\n                btn.onclick = () => song.type === 'youtube' ? window.open(song.url, '_blank') : playMusic(zone, song.url, btn, song.name, song.id);\n                \n                const loopBtn = document.createElement('button');\n                loopBtn.className = `p-3 bg-gray-700 hover:bg-gray-600 text-gray-500 transition border-l border-gray-600 ${song.loop ? 'loop-active' : ''}`;\n                loopBtn.innerHTML = \"ğŸ”„\";\n                loopBtn.onclick = (e) => {\n                    e.stopPropagation();\n                    if (song.type === 'youtube') return;\n                    song.loop = !song.loop;\n                    loopBtn.classList.toggle('loop-active', song.loop);\n                    if (audioContexts[zone] && activeButtons[zone] === btn) audioContexts[zone].loop = song.loop;\n                };\n\n                const delBtn = document.createElement('button');\n                delBtn.className = \"p-3 bg-gray-700 hover:bg-red-900 rounded-r-lg text-gray-400\";\n                delBtn.innerHTML = \"âœ•\";\n                delBtn.onclick = () => { playlists[zone].splice(index, 1); renderList(zone); };\n                \n                wrapper.appendChild(btn);\n                wrapper.appendChild(loopBtn);\n                wrapper.appendChild(delBtn);\n                list.appendChild(wrapper);\n            });\n        }\n\n        function playMusic(zone, url, btn, fileName, songId, forceLoop = null) {\n            const masterVol = document.getElementById('masterVolume').value;\n            const allZones = ['bgm', 'show', 'buffer', 'draw'];\n            \n            allZones.forEach(z => {\n                if (z !== zone) {\n                    if (z === 'bgm') fadeOutZone('bgm');\n                    else stopZone(z);\n                }\n            });\n\n            stopZone(zone);\n            const audio = new Audio(url);\n            audio.volume = masterVol;\n            \n            let currentSong = null;\n            Object.values(playlists).flat().forEach(s => { if(s.id === songId) currentSong = s; });\n            audio.loop = (forceLoop !== null) ? forceLoop : (currentSong ? currentSong.loop : false);\n            \n            audioContexts[zone] = audio;\n            activeButtons[zone] = btn;\n            btn.classList.add('active-glow');\n            \n            const prog = document.getElementById(`progress-${zone}`);\n            if (prog) {\n                prog.classList.remove('hidden', 'paused-state');\n                document.getElementById(`title-${zone}`).innerText = fileName;\n                document.getElementById(`pause-btn-${zone}`).innerText = \"â¸\";\n            }\n\n            audio.play().catch(() => updateStatus(\"æ’­æ”¾å¤±æ•—ï¼Œè«‹é‡æ–°è¼‰å…¥æª”æ¡ˆ\"));\n            updateStatus(`æ­£åœ¨æ’­æ”¾: ${fileName}`);\n\n            progressIntervals[zone] = setInterval(() => {\n                const seek = document.getElementById(`seek-${zone}`);\n                const timeDisplay = document.getElementById(`time-${zone}`);\n                if (audio.duration) {\n                    seek.value = (audio.currentTime / audio.duration) * 100;\n                    timeDisplay.innerText = `${formatTime(audio.currentTime)} / ${formatTime(audio.duration)}`;\n                }\n            }, 100);\n\n            audio.onended = () => { if (!audio.loop) stopZone(zone); };\n        }\n\n        // å­˜æª”èˆ‡åŒ¯å…¥\n        function exportConfig() {\n            const config = {};\n            Object.keys(playlists).forEach(zone => {\n                config[zone] = playlists[zone].map(song => ({\n                    name: song.name, type: song.type, url: song.type === 'youtube' ? song.url : \"\", loop: song.loop\n                }));\n            });\n            const blob = new Blob([JSON.stringify(config, null, 2)], { type: 'application/json' });\n            const url = URL.createObjectURL(blob);\n            const a = document.createElement('a');\n            a.href = url;\n            a.download = `éŸ³æ¨‚æ§å°è¨­å®š_${new Date().toLocaleDateString()}.json`;\n            a.click();\n        }\n\n        function importConfig(input) {\n            const file = input.files[0];\n            if (!file) return;\n            const reader = new FileReader();\n            reader.onload = (e) => {\n                try {\n                    const config = JSON.parse(e.target.result);\n                    Object.keys(config).forEach(zone => {\n                        playlists[zone] = config[zone].map(song => {\n                            song.id = Math.random().toString(36).substr(2, 9);\n                            if (song.type === 'local') {\n                                song.name = \"ğŸ”„ \" + song.name;\n                                song.url = \"\";\n                            }\n                            return song;\n                        });\n                        renderList(zone);\n                    });\n                    updateStatus(\"åŒ¯å…¥å®Œæˆï¼YT é€£çµå·²æ¢å¾©ï¼Œæœ¬æ©Ÿæª”æ¡ˆéœ€é‡æ–°é»æ“Š [æª”æ¡ˆ] è¼‰å…¥ã€‚\");\n                } catch (err) { alert(\"è¨­å®šæª”éŒ¯èª¤\"); }\n            };\n            reader.readAsText(file);\n        }\n\n        // è¼”åŠ©åŠŸèƒ½\n        function togglePauseZone(zone) {\n            const audio = audioContexts[zone];\n            if (!audio) return;\n            const btn = document.getElementById(`pause-btn-${zone}`);\n            const prog = document.getElementById(`progress-${zone}`);\n            if (audio.paused) { audio.play(); btn.innerText = \"â¸\"; prog.classList.remove('paused-state'); }\n            else { audio.pause(); btn.innerText = \"â–¶\"; prog.classList.add('paused-state'); }\n        }\n\n        function togglePauseAll() {\n            const anyPlaying = Object.values(audioContexts).some(a => a && !a.paused);\n            Object.keys(audioContexts).forEach(zone => {\n                const audio = audioContexts[zone];\n                if (!audio) return;\n                if (anyPlaying) audio.pause(); else audio.play();\n                const btn = document.getElementById(`pause-btn-${zone}`);\n                const prog = document.getElementById(`progress-${zone}`);\n                if (btn) btn.innerText = anyPlaying ? \"â–¶\" : \"â¸\";\n                if (prog) anyPlaying ? prog.classList.add('paused-state') : prog.classList.remove('paused-state');\n            });\n            document.getElementById('global-pause-icon').innerText = anyPlaying ? \"â–¶\" : \"â¸\";\n        }\n\n        function stopZone(zone) {\n            if (audioContexts[zone]) { audioContexts[zone].pause(); audioContexts[zone] = null; }\n            if (progressIntervals[zone]) { clearInterval(progressIntervals[zone]); delete progressIntervals[zone]; }\n            if (activeButtons[zone]) { activeButtons[zone].classList.remove('active-glow'); activeButtons[zone] = null; }\n            const prog = document.getElementById(`progress-${zone}`);\n            if (prog) prog.classList.add('hidden');\n        }\n\n        function fadeOutZone(zone) {\n            const audio = audioContexts[zone];\n            if (!audio) return;\n            let vol = audio.volume;\n            const interval = setInterval(() => {\n                vol -= 0.15;\n                if (vol <= 0) { stopZone(zone); clearInterval(interval); }\n                else audio.volume = Math.max(0, vol);\n            }, 50);\n        }\n\n        function stopAll() {\n            ['bgm', 'show', 'buffer', 'draw'].forEach(z => stopZone(z));\n            updateStatus(\"å·²æ¸…ç©ºä¸¦åœæ­¢\");\n        }\n\n        function formatTime(seconds) {\n            const m = Math.floor(seconds / 60);\n            const s = Math.floor(seconds % 60);\n            return `${m}:${s.toString().padStart(2, '0')}`;\n        }\n\n        function seekAudio(zone, value) {\n            const audio = audioContexts[zone];\n            if (audio && audio.duration) audio.currentTime = (value / 100) * audio.duration;\n        }\n\n        function updateStatus(msg) { document.getElementById('status-text').innerText = msg; }\n\n        document.getElementById('masterVolume').oninput = function() {\n            const vol = this.value;\n            Object.values(audioContexts).forEach(audio => { if (audio) audio.volume = vol; });\n        };\n    </script>\n</body>\n</html>"
  }
]